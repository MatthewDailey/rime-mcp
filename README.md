# MCP Rime Server

A Model Context Protocol (MCP) server that provides real-time text-to-speech capabilities using the Rime API. This server directly speaks the text aloud as it receives audio chunks from Rime's streaming API.

## Features

- Exposes a `speak` tool that converts text to speech and plays it immediately
- Real-time streaming of audio as it's generated by Rime
- Supports various voice options and customization parameters
- Detailed progress logging to the console
- Automatic cleanup of temporary audio files

## Requirements

- Node.js 16.x or higher
- A working audio output device
- For Linux users: `mpg123` or `mplayer` for MP3 playback
- For Mac users: `afplay` is used by default (built-in)
- For Windows users: Media Player is used by default

## Installation

```bash
npm install mcp-rime
```

## Configuration

Create a `.env` file in your project root with your Rime API key:

```
RIME_API_KEY=your_api_key_here
```

You can get your API key from the [Rime Dashboard](https://rime.ai/dashboard/tokens).

## Usage

1. Start the server:
```bash
npx mcp-rime
```

2. The server exposes a `speak` tool with the following parameters:

- `text` (required): The text to speak aloud
- `speaker` (optional): The voice to use (defaults to "cove")
- `speedAlpha` (optional): Speech speed multiplier (default: 1.0)
- `reduceLatency` (optional): Whether to optimize for lower latency (default: false)

3. When the `speak` tool is called, it will:
   - Connect to Rime's streaming API
   - Process audio chunks in real-time (with progress logged to console)
   - Play the audio through your system's default audio device
   - Return information about the speech generation

## Development

1. Install dependencies:
```bash
npm install
```

2. Build the server:
```bash
npm run build
```

3. Run in development mode with hot reload:
```bash
npm run dev
```

## Progress Reporting

The server logs detailed progress information to the console as it processes audio:

- When speech synthesis starts
- When each audio chunk is received (with size information)
- When word timestamps are received
- When audio generation is complete
- When audio playback starts and finishes

## Troubleshooting

If you experience issues with audio playback:

1. Make sure you have the appropriate audio player installed for your OS
2. Check that your system's audio is working correctly
3. Verify that your Rime API key is valid and has sufficient quota

## License

MIT